## **PHP Object-Relational Mapping (ORM) рж╕ржорзНржкрзВрж░рзНржг ржЧрж╛ржЗржб**  

### **ЁЯФ╣ ORM ржХрж┐?**  
**Object-Relational Mapping (ORM)** рж╣рж▓ ржПржоржи ржПржХржЯрж┐ ржЯрзЗржХржирж┐ржХ, ржпрж╛ ржбрж╛ржЯрж╛ржмрзЗржЬ ржЯрзЗржмрж┐рж▓ржЧрзБрж▓рзЛрж░ рж╕рж╛ржерзЗ ржЕржмржЬрзЗржХрзНржЯ ржУ ржХрзНрж▓рж╛рж╕ржЧрзБрж▓рзЛрж░ рж╕ржВржпрзЛржЧ рж╕рзНржерж╛ржкржи ржХрж░рзЗред ржПржЯрж┐ SQL ржХрзЛрзЯрзЗрж░рж┐ рж▓рзЗржЦрж╛рж░ ржкрж░рж┐ржмрж░рзНрждрзЗ **OOP (Object-Oriented Programming)** ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржбрж╛ржЯрж╛ржмрзЗржЬ ржорзНржпрж╛ржирж┐ржкрзБрж▓рзЗрж╢ржи рж╕рж╣ржЬ ржХрж░рзЗ рждрзЛрж▓рзЗред  

ORM ржмрзНржпржмрж╣рж╛рж░рзЗрж░ рж╕рзБржмрж┐ржзрж╛ржЧрзБрж▓рзЛ:
тЬФ SQL рж▓рзЗржЦрж╛рж░ ржкрзНрж░ржпрж╝рзЛржЬржи ржирзЗржЗ  
тЬФ ржбрж╛ржЯрж╛ржмрзЗржЬ ржЗржЮрзНржЬрж┐ржи ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рж╛ рж╕рж╣ржЬ  
тЬФ SQL Injection ржкрзНрж░рждрж┐рж░рзЛржз ржХрж░рж╛ ржпрж╛рзЯ  
тЬФ ржХрзЛржб рж╕рж╣ржЬ ржПржмржВ рж░рж┐ржбрзЗржмрж▓ рж╣рзЯ  

---

## **ЁЯФ╣ ржЬржиржкрзНрж░рж┐ржпрж╝ ORM рж▓рж╛ржЗржмрзНрж░рзЗрж░рж┐**  
PHP-рждрзЗ ржмрзЗрж╢ ржХржпрж╝рзЗржХржЯрж┐ ORM рж▓рж╛ржЗржмрзНрж░рзЗрж░рж┐ рж░рзЯрзЗржЫрзЗ:
1. **Eloquent ORM** (Laravel ржПрж░ ржЬржирзНржп)  
2. **Doctrine ORM** (Symfony ржмрж╛ рж╕рзНржЯрзНржпрж╛ржирзНржбржЕрзНржпрж╛рж▓рзЛржи)  
3. **Propel ORM**  
4. **RedBeanPHP**  

Laravel ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛рзЯ ржЖржкржирж┐ **Eloquent ORM** рж╢рж┐ржЦрж▓рзЗ рж╕ржмржЪрзЗрзЯрзЗ ржЙржкржХрж╛рж░ ржкрж╛ржмрзЗржиред  

---

# **ЁЯФ╣ Eloquent ORM (Laravel)**
Eloquent рж╣рж▓ Laravel-ржПрж░ ржмрж┐рж▓рзНржЯ-ржЗржи ORM, ржпрж╛ `Active Record` ржкрзНржпрж╛ржЯрж╛рж░рзНржи ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗред ржкрзНрж░рждрж┐ржЯрж┐ ржЯрзЗржмрж┐рж▓рзЗрж░ ржЬржирзНржп ржПржХржЯрж┐ Model ржерж╛ржХрзЗ, ржпрж╛рж░ ржорж╛ржзрзНржпржорзЗ ржбрж╛ржЯрж╛ржмрзЗржЬ ржорзНржпрж╛ржирж┐ржкрзБрж▓рзЗрж╢ржи ржХрж░рж╛ ржпрж╛рзЯред  

## **1я╕ПтГг Model рждрзИрж░рж┐ ржХрж░рж╛**
ржкрзНрж░ржержорзЗ ржПржХржЯрж┐ **Model** рждрзИрж░рж┐ ржХрж░рзБржи:
```bash
php artisan make:model User
```
ржПржЯрж┐ `app/Models/User.php` ржлрж╛ржЗрж▓ рждрзИрж░рж┐ ржХрж░ржмрзЗред

### **ЁЯСЙ Model Example (`User.php`)**
```php
<?php
namespace App\Models;
use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class User extends Model
{
    use HasFactory;

    protected $fillable = ['name', 'email', 'password']; // Mass Assignment Protection
}
?>
```
ЁЯФ╣ `fillable` ржЕрзНржпрж╛ржЯрзНрж░рж┐ржмрж┐ржЙржЯ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржлрж┐рж▓рзНржбржЧрзБрж▓рзЛрж░ ржнрзНржпрж╛рж▓рзБ ржЗржирж╕рж╛рж░рзНржЯ ржХрж░рж╛ ржпрж╛рзЯред

---

## **2я╕ПтГг Eloquent ржжрж┐рзЯрзЗ Data Insert ржХрж░рж╛**
```php
use App\Models\User;

// ржирждрзБржи User рждрзИрж░рж┐ ржХрж░рж╛
$user = new User();
$user->name = "John Doe";
$user->email = "john@example.com";
$user->password = bcrypt("password123");
$user->save();

echo "тЬЕ User Created Successfully!";
```
ЁЯФ╣ `save()` ржорзЗржержб ржбрж╛ржЯрж╛ржмрзЗржЬрзЗ ржЗржирж╕рж╛рж░рзНржЯ ржХрж░рзЗред

### **ЁЯСЙ Mass Assignment ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ Insert ржХрж░рж╛**
```php
User::create([
    'name' => 'Alice',
    'email' => 'alice@example.com',
    'password' => bcrypt('password123')
]);
```
ЁЯФ╣ ржПржЯрж┐ рждржЦржиржЗ ржХрж╛ржЬ ржХрж░ржмрзЗ, ржпржжрж┐ `fillable` ржЕрзНржпрж╛ржЯрзНрж░рж┐ржмрж┐ржЙржЯ ржоржбрзЗрж▓рзЗ рж╕рзЗржЯ ржХрж░рж╛ ржерж╛ржХрзЗред

---

## **3я╕ПтГг Eloquent ржжрж┐рзЯрзЗ Data Read ржХрж░рж╛**
### **ЁЯСЙ рж╕ржм ржЗржЙржЬрж╛рж░ рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рж╛**
```php
$users = User::all();
foreach ($users as $user) {
    echo $user->name . " - " . $user->email . "<br>";
}
```

### **ЁЯСЙ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржЗржЙржЬрж╛рж░ ржЦрзЛржБржЬрж╛ (WHERE Condition)**
```php
$user = User::where('email', 'john@example.com')->first();
echo $user->name;
```

### **ЁЯСЙ Primary Key ржжрж┐рзЯрзЗ ржЦрзЛржБржЬрж╛**
```php
$user = User::find(1); // ID = 1
echo $user->name;
```

---

## **4я╕ПтГг Eloquent ржжрж┐рзЯрзЗ Data Update ржХрж░рж╛**
```php
$user = User::where('email', 'john@example.com')->first();
$user->name = "John Updated";
$user->save();
```

### **ЁЯСЙ Mass Update (Multiple Rows)**
```php
User::where('status', 'inactive')->update(['status' => 'active']);
```

---

## **5я╕ПтГг Eloquent ржжрж┐рзЯрзЗ Data Delete ржХрж░рж╛**
```php
$user = User::where('email', 'john@example.com')->first();
$user->delete();
```
### **ЁЯСЙ Primary Key ржжрж┐рзЯрзЗ Delete ржХрж░рж╛**
```php
User::destroy(1); // ID = 1
```

### **ЁЯСЙ Multiple Rows Delete**
```php
User::where('status', 'inactive')->delete();
```

---

## **6я╕ПтГг Eloquent Query Scopes (Custom Query)**
Eloquent-ржП ржЖржорж░рж╛ **Query Scope** рждрзИрж░рж┐ ржХрж░рзЗ ржХрзЛржб ржЖрж░ржУ ржкрж░рж┐рж╖рзНржХрж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░рж┐ред

### **ЁЯСЙ Model-ржП Scope рждрзИрж░рж┐ ржХрж░рж╛ (`User.php`)**
```php
public function scopeActive($query)
{
    return $query->where('status', 'active');
}
```

### **ЁЯСЙ Scope ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ Active Users ржЦрзЛржБржЬрж╛**
```php
$users = User::active()->get();
```

---

## **7я╕ПтГг Eloquent Relationships (One-to-Many, Many-to-Many)**
### **ЁЯСЙ One-to-Many Example (User - Posts Relationship)**
#### **1я╕ПтГг `User.php` Model**
```php
public function posts()
{
    return $this->hasMany(Post::class);
}
```

#### **2я╕ПтГг `Post.php` Model**
```php
public function user()
{
    return $this->belongsTo(User::class);
}
```

#### **3я╕ПтГг Relationship ржмрзНржпржмрж╣рж╛рж░**
```php
$user = User::find(1);
foreach ($user->posts as $post) {
    echo $post->title;
}
```

---

## **ЁЯЪА ORM Best Practices**
тЬФ **Eloquent ORM ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи** (SQL ржХрзЛрзЯрзЗрж░рж┐рж░ ржкрж░рж┐ржмрж░рзНрждрзЗ)ред  
тЬФ **Mass Assignment ржПрж░ ржЬржирзНржп `fillable` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи** (ржирж┐рж░рж╛ржкрждрзНрждрж╛рж░ ржЬржирзНржп)ред  
тЬФ **Query Scope ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи** (ржХрзЛржб ржХрзНрж▓рж┐ржи ржУ рж░рж┐ржЗржЙржЬрзЗржмрж▓ ржХрж░рж╛рж░ ржЬржирзНржп)ред  
тЬФ **Eager Loading (`with()`) ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи** (Performance ржЕржкрзНржЯрж┐ржорж╛ржЗржЬрзЗрж╢ржирзЗрж░ ржЬржирзНржп)ред  

---
## **ЁЯФ╣ рж╕ржВржХрзНрж╖рзЗржкрзЗ ORM-ржПрж░ рж╕рзБржмрж┐ржзрж╛**
тЬЕ **SQL ржирж╛ рж▓рж┐ржЦрзЗржЗ ржбрж╛ржЯрж╛ржмрзЗржЬ ржорзНржпрж╛ржирж┐ржкрзБрж▓рзЗрж╢ржи ржХрж░рж╛ ржпрж╛рзЯред**  
тЬЕ **Eloquent-ржПрж░ рж╕рж╛рж╣рж╛ржпрзНржпрзЗ ржХрзЛржб ржХрзНрж▓рж┐ржи ржУ ржорзЗржЗржиржЯрзЗржЗржирзЗржмрж▓ рж╣рзЯред**  
тЬЕ **SQL Injection ржкрзНрж░рждрж┐рж░рзЛржз ржХрж░рж╛ ржпрж╛рзЯред**  
тЬЕ **Relational ржбрж╛ржЯрж╛ржмрзЗржЬрзЗрж░ рж╕рж╛ржерзЗ рж╕рж╣ржЬрзЗ ржХрж╛ржЬ ржХрж░рж╛ ржпрж╛рзЯред**  

ржЖржкржирж╛рж░ Laravel ржкрзНрж░ржЬрзЗржХрзНржЯрзЗрж░ ржЬржирзНржп **Eloquent ORM ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржмрзЗрж╕рзНржЯ ржЪрзЯрзЗрж╕!** ЁЯЪА