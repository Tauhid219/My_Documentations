## **ЁЯЫая╕П PHP Sessions ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд рж╢рзЗржЦрзЛ**  

**Session** рж╣рж▓рзЛ **рж╕рж╛рж░рзНржнрж╛рж░-рж╕рж╛ржЗржб рж╕рзНржЯрзЛрж░рзЗржЬ**, ржпрзЗржЦрж╛ржирзЗ ржЗржЙржЬрж╛рж░рзЗрж░ рждржерзНржп рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рж╛ рж╣рзЯред ржПржЯрж┐ **Cookies-ржПрж░ ржорждрзЛржЗ ржбрж╛ржЯрж╛ ржзрж░рзЗ рж░рж╛ржЦрзЗ**, ржХрж┐ржирзНрждрзБ ржмрзНрж░рж╛ржЙржЬрж╛рж░рзЗрж░ ржкрж░рж┐ржмрж░рзНрждрзЗ **рж╕рж╛рж░рзНржнрж╛рж░рзЗ рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рзЗ**, ржпрж╛ **ржмрзЗрж╢рж┐ ржирж┐рж░рж╛ржкржж**ред  

---

## **тЬЕ 1я╕ПтГг PHP Session ржХрзА ржПржмржВ ржХрзЗржи ржкрзНрж░рзЯрзЛржЬржи?**  
тЬЕ **HTTP рж╕рзНржЯрзЗржЯрж▓рзЗрж╕ (stateless)** тАУ ржкрзНрж░рждрж┐ржЯрж┐ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржЖрж▓рж╛ржжрж╛, рждрж╛ржЗ ржЖржЧрзЗрж░ ржбрж╛ржЯрж╛ ржоржирзЗ рж░рж╛ржЦрзЗ ржирж╛ред  
тЬЕ **Session ржмрзНржпржмрж╣рж╛рж░рзЗрж░ ржорж╛ржзрзНржпржорзЗ** тАУ ржЗржЙржЬрж╛рж░рзЗрж░ ржбрж╛ржЯрж╛ **ржПржХрж╛ржзрж┐ржХ ржкрзЗржЬрзЗ рж╕ржВрж░ржХрзНрж╖ржг** ржХрж░рж╛ ржпрж╛рзЯред  
тЬЕ **Session vs Cookies:**  
| **Sessions**                   | **Cookies**               |
| ------------------------------ | ------------------------- |
| **рж╕рж╛рж░рзНржнрж╛рж░рзЗ рж╕ржВрж░ржХрзНрж╖рж┐ржд рж╣ржпрж╝**              | **ржмрзНрж░рж╛ржЙржЬрж╛рж░рзЗ рж╕ржВрж░ржХрзНрж╖рж┐ржд рж╣ржпрж╝**        |
| **рж╕рж┐ржХрж┐ржЙрж░рж┐ржЯрж┐ ржмрзЗрж╢рж┐**                   | **XSS ржУ CSRF ржЭрзБржБржХрж┐ ржмрзЗрж╢рж┐**      |
| **ржмржбрж╝ ржбрж╛ржЯрж╛ рж╕ржВрж░ржХрзНрж╖ржг рж╕ржорзНржнржм**           | **ржорж╛рждрзНрж░ 4KB ржбрж╛ржЯрж╛ рж░рж╛ржЦрж╛ ржпрж╛ржпрж╝**      |
| **ржмрзНрж░рж╛ржЙржЬрж╛рж░ ржмржирзНржз рж╣рж▓рзЗ ржорзБржЫрзЗ ржпрж╛ржпрж╝ (рж╕рж╛ржзрж╛рж░ржгржд)** | **ржбрж╛ржЯрж╛ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж╕ржоржпрж╝ ржкрж░рзНржпржирзНржд ржерж╛ржХрзЗ** |

---

## **тЬЕ 2я╕ПтГг PHP Session рж╢рзБрж░рзБ ржХрж░рж╛**  

ЁЯУМ **Session ржмрзНржпржмрж╣рж╛рж░рзЗрж░ ржЬржирзНржп `session_start();` ржЕржмрж╢рзНржпржЗ ржкрзНрж░рждрж┐ржЯрж┐ ржкрзЗржЬрзЗрж░ рж╢рзБрж░рзБрждрзЗ рж▓рж┐ржЦрждрзЗ рж╣ржмрзЗред**  
```php
<?php
session_start(); // рж╕рзЗрж╢ржи рж╢рзБрж░рзБ
$_SESSION["username"] = "JohnDoe"; // рж╕рзЗрж╢ржирзЗ ржбрж╛ржЯрж╛ рж╕рзЗржЯ ржХрж░рж╛
echo "Session started!";
?>
```
тЬЕ `$_SESSION["username"]` = **рж╕рж╛рж░рзНржнрж╛рж░рзЗ рж╕ржВрж░ржХрзНрж╖рж┐ржд ржПржХржЯрж┐ ржнрзНржпрж╛рж░рж┐рзЯрзЗржмрж▓**, ржпрж╛ ржкрзБрж░рзЛ ржУрзЯрзЗржмрж╕рж╛ржЗржЯ ржЬрзБрзЬрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрж╛ржмрзЗред  

---

## **тЬЕ 3я╕ПтГг PHP Session ржбрж╛ржЯрж╛ ржкрзЬрж╛ (Retrieve ржХрж░рж╛)**  
```php
<?php
session_start(); // рж╕рзЗрж╢ржи ржЪрж╛рж▓рзБ ржХрж░рждрзЗ рж╣ржмрзЗ

if (isset($_SESSION["username"])) {
    echo "Welcome, " . $_SESSION["username"];
} else {
    echo "Session not set!";
}
?>
```
тЬЕ `isset($_SESSION["username"])` тАУ ржЪрзЗржХ ржХрж░ржмрзЗ рж╕рзЗрж╢ржи ржбрж╛ржЯрж╛ рж╕рзЗржЯ ржХрж░рж╛ ржЖржЫрзЗ ржХрж┐ржирж╛ред  

---

## **тЬЕ 4я╕ПтГг PHP Session Update ржХрж░рж╛**  
рж╕рзЗрж╢ржи ржнрзНржпрж╛рж▓рзБ ржЖржкржбрзЗржЯ ржХрж░рж╛рж░ ржЬржирзНржп **ржирждрзБржи ржорж╛ржи ржЕрзНржпрж╛рж╕рж╛ржЗржи ржХрж░рждрзЗ рж╣ржмрзЗ**:  
```php
<?php
session_start();
$_SESSION["username"] = "NewUser"; // ржЖржкржбрзЗржЯ ржХрж░рж╛
echo "Session updated!";
?>
```

---

## **тЬЕ 5я╕ПтГг PHP Session ржбрж┐рж▓рж┐ржЯ ржХрж░рж╛ (Destroy ржХрж░рж╛)**  

### **ЁЯСЙ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржПржХржЯрж┐ рж╕рзЗрж╢ржи ржбрж╛ржЯрж╛ ржорзБржЫрждрзЗ**  
```php
unset($_SESSION["username"]); // рж╢рзБржзрзБ "username" рж╕рзЗрж╢ржи ржорзБржЫрзЗ ржлрзЗрж▓ржмрзЗ
```

### **ЁЯСЙ рж╕ржорзНржкрзВрж░рзНржг рж╕рзЗрж╢ржи ржорзБржЫрзЗ ржлрзЗрж▓рждрзЗ**  
```php
session_unset();  // рж╕ржм рж╕рзЗрж╢ржи ржнрзНржпрж╛рж░рж┐рзЯрзЗржмрж▓ ржорзБржЫрзЗ ржлрзЗрж▓ржмрзЗ
session_destroy(); // рж╕ржорзНржкрзВрж░рзНржг рж╕рзЗрж╢ржи ржзрзНржмржВрж╕ ржХрж░ржмрзЗ
```

ЁЯУМ `session_destroy();` ржХрж▓ ржХрж░рж▓рзЗ рж╕рзЗрж╢ржи ржлрж╛ржЗрж▓ ржбрж┐рж▓рж┐ржЯ рж╣ржмрзЗ, рждржмрзЗ **рждрзБрж░ржирзНржд ржХрж╛ржЬ ржХрж░ржмрзЗ ржирж╛**ред  

---

## **тЬЕ 6я╕ПтГг PHP Session ржПрж░ ржорзЗрзЯрж╛ржж ржирж┐рзЯржирзНрждрзНрж░ржг ржХрж░рж╛**  

### **ЁЯСЙ рж╕рзЗрж╢ржи ржЯрж╛ржЗржоржЖржЙржЯ рж╕рзЗржЯ ржХрж░рж╛ (ржпрзЗржоржи: рзйрзж ржорж┐ржирж┐ржЯ)**  
```php
<?php
session_start();

$session_timeout = 1800; // 1800 рж╕рзЗржХрзЗржирзНржб = рзйрзж ржорж┐ржирж┐ржЯ

if (isset($_SESSION["last_activity"]) && (time() - $_SESSION["last_activity"]) > $session_timeout) {
    session_unset(); // рж╕рзЗрж╢ржи ржорзБржЫрзЗ ржлрзЗрж▓рж╛
    session_destroy(); // ржзрзНржмржВрж╕ ржХрж░рж╛
    echo "Session expired!";
} else {
    $_SESSION["last_activity"] = time(); // рж╕рзЗрж╢ржи ржЖржкржбрзЗржЯ
    echo "Session active!";
}
?>
```
ЁЯУМ **ржмрзНржпрж╛ржЦрзНржпрж╛:**  
- `_SESSION["last_activity"]` тЖТ рж╢рзЗрж╖ ржЕрзНржпрж╛ржХрзНржЯрж┐ржнрж┐ржЯрж┐ ржЯрзНрж░рзНржпрж╛ржХ ржХрж░рж╛ рж╣ржЪрзНржЫрзЗ  
- ржпржжрж┐ рзйрзж ржорж┐ржирж┐ржЯрзЗрж░ ржмрзЗрж╢рж┐ рж╣рзЯрзЗ ржпрж╛рзЯ тЖТ **рж╕рзЗрж╢ржи ржорзБржЫрзЗ ржлрзЗрж▓рж╛ рж╣ржмрзЗ**  

---

## **тЬЕ 7я╕ПтГг PHP Login System (Session ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ)**
ржПржЦржи ржЖржорж░рж╛ **Session ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ рж▓ржЧржЗржи рж╕рж┐рж╕рзНржЯрзЗржо рждрзИрж░рж┐ ржХрж░ржмрзЛред**  

### **ЁЯСЙ `login.php` (рж▓ржЧржЗржи рж╕рж┐рж╕рзНржЯрзЗржо рждрзИрж░рж┐)**  
```php
<?php
session_start();

if ($_SERVER["REQUEST_METHOD"] == "POST") {
    $username = $_POST["username"];
    $password = $_POST["password"];

    if ($username == "admin" && $password == "1234") { // ржбрзЗржорзЛ ржЗржЙржЬрж╛рж░ ржбрж╛ржЯрж╛
        $_SESSION["username"] = $username; // ржЗржЙржЬрж╛рж░ рж╕рзЗрж╢ржи рж╕рзЗржЯ ржХрж░рж╛
        header("Location: dashboard.php"); // рж░рж┐ржбрж╛ржЗрж░рзЗржХрзНржЯ ржХрж░рж╛
        exit();
    } else {
        echo "Invalid username or password!";
    }
}
?>

<form method="post">
    Username: <input type="text" name="username"><br>
    Password: <input type="password" name="password"><br>
    <button type="submit">Login</button>
</form>
```

### **ЁЯСЙ `dashboard.php` (рж▓ржЧржЗржи ржЪрзЗржХ ржХрж░рж╛)**  
```php
<?php
session_start();
if (!isset($_SESSION["username"])) {
    header("Location: login.php");
    exit();
}
echo "Welcome, " . $_SESSION["username"];
?>

<a href="logout.php">Logout</a>
```

### **ЁЯСЙ `logout.php` (рж▓ржЧржЖржЙржЯ рж╕рж┐рж╕рзНржЯрзЗржо)**  
```php
<?php
session_start();
session_unset();
session_destroy();
header("Location: login.php");
exit();
?>
```
тЬЕ **ржПржЦржи ржЗржЙржЬрж╛рж░ рж▓ржЧржЗржи ржХрж░рж▓рзЗ рж╕рзЗрж╢ржи рждрзИрж░рж┐ рж╣ржмрзЗ, ржПржмржВ рж▓ржЧржЖржЙржЯ ржХрж░рж▓рзЗ рж╕рзЗрж╢ржи ржорзБржЫрзЗ ржпрж╛ржмрзЗ!** ЁЯОп  

---

## **тЬЕ 8я╕ПтГг PHP Session Security (ржирж┐рж░рж╛ржкрждрзНрждрж╛ ржмрзГржжрзНржзрж┐ ржХрж░рж╛)**  
Session Hijacking ржПржмржВ ржЕржирзНржпрж╛ржирзНржп ржирж┐рж░рж╛ржкрждрзНрждрж╛ ржЭрзБржБржХрж┐ ржХржорж╛ржирзЛрж░ ржЬржирзНржп ржХрж┐ржЫрзБ ржХрзМрж╢рж▓:

### **ЁЯСЙ рзз. рж╕рзЗрж╢ржи ржЖржЗржбрж┐ рж░рж┐ржЬрзЗржирж╛рж░рзЗржЯ ржХрж░рж╛**  
```php
session_regenerate_id(true); // ржирждрзБржи рж╕рзЗрж╢ржи ржЖржЗржбрж┐ рж╕рзЗржЯ ржХрж░ржмрзЗ
```
ЁЯУМ ржПржЯрж┐ **Session Fixation ржЖржХрзНрж░ржоржг ржкрзНрж░рждрж┐рж░рзЛржзрзЗ рж╕рж╣рж╛рзЯржХред**  

### **ЁЯСЙ рзи. рж╢рзБржзрзБржорж╛рждрзНрж░ HTTPS-ржП рж╕рзЗрж╢ржи ржЕржирзБржорзЛржжржи ржХрж░рж╛**  
```php
session_set_cookie_params([
    'lifetime' => 0,
    'path' => '/',
    'domain' => 'example.com',
    'secure' => true,  // ржХрзБржХрж┐ рж╢рзБржзрзБржорж╛рждрзНрж░ HTTPS рж╕ржВржпрзЛржЧрзЗ ржпрж╛ржмрзЗ
    'httponly' => true, // JavaScript ржерзЗржХрзЗ рж╕рзЗрж╢ржи ржЕрзНржпрж╛ржХрзНрж╕рзЗрж╕ ржХрж░рж╛ ржпрж╛ржмрзЗ ржирж╛
    'samesite' => 'Strict' // CSRF ржкрзНрж░рждрж┐рж░рзЛржзрзЗ рж╕рж╣рж╛рзЯржХ
]);
```

### **ЁЯСЙ рзй. IP ржЪрзЗржХ ржХрж░рж╛ (ржЕржирзНржп ржХрзЗржЙ рж╕рзЗрж╢ржи ржЪрзБрж░рж┐ ржХрж░рж▓рзЗ ржмрзНрж▓ржХ ржХрж░ржмрзЗ)**  
```php
$_SESSION["user_ip"] = $_SERVER["REMOTE_ADDR"];

if ($_SESSION["user_ip"] !== $_SERVER["REMOTE_ADDR"]) {
    session_unset();
    session_destroy();
    echo "Session hijacking attempt detected!";
    exit();
}
```

тЬЕ **ржПржЗрж╕ржм ржирж┐рж░рж╛ржкрждрзНрждрж╛ ржмрзНржпржмрж╕рзНржерж╛ ржкрзНрж░рзЯрзЛржЧ ржХрж░рж▓рзЗ Session ржЕржирзЗржХ ржмрзЗрж╢рж┐ ржирж┐рж░рж╛ржкржж рж╣ржмрзЗред** ЁЯФТ  

---

## **ЁЯЪА рж╕рж╛рж░рж╕ржВржХрзНрж╖рзЗржк**
| **Session ржЕржкрж╛рж░рзЗрж╢ржи**       | **PHP ржХрзЛржб**                            |
| ----------------------- | ------------------------------------- |
| **рж╕рзЗрж╢ржи рж╢рзБрж░рзБ ржХрж░рж╛**           | `session_start();`                    |
| **рж╕рзЗрж╢ржи ржбрж╛ржЯрж╛ рж╕рзЗржЯ ржХрж░рж╛**        | `$_SESSION["key"] = "value";`         |
| **рж╕рзЗрж╢ржи ржбрж╛ржЯрж╛ ржкржбрж╝рж╛**           | `echo $_SESSION["key"];`              |
| **рж╕рзЗрж╢ржи ржЖржкржбрзЗржЯ ржХрж░рж╛**         | `$_SESSION["key"] = "new_value";`     |
| **ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж╕рзЗрж╢ржи ржбрж╛ржЯрж╛ ржбрж┐рж▓рж┐ржЯ ржХрж░рж╛** | `unset($_SESSION["key"]);`            |
| **рж╕ржм рж╕рзЗрж╢ржи ржорзБржЫрзЗ ржлрзЗрж▓рж╛**        | `session_unset(); session_destroy();` |
| **рж╕рзЗрж╢ржи ржЖржЗржбрж┐ рж░рж┐ржлрзНрж░рзЗрж╢ ржХрж░рж╛**     | `session_regenerate_id(true);`        |

---

## **ЁЯОп ржкрж░ржмрж░рзНрждрзА ржзрж╛ржк**
тЬЕ **Session vs Cookies ржПрж░ рждрзБрж▓ржирж╛ ржЬрж╛ржирждрзЗ ржЪрж╛ржУ?**  
тЬЕ **Session Security ржирж┐рзЯрзЗ ржЖрж░ржУ ржЬрж╛ржирждрзЗ ржЪрж╛ржУ?**  

ржмрж▓рзЛ, **ржЖрж░ржУ ржХрзА ржЬрж╛ржирждрзЗ ржЪрж╛ржУ?** ЁЯШГ