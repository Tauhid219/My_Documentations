рждрзЛржорж╛рж░ ржЙржжрзНржжрзЗрж╢рзНржп ржЦрзБржм рж╕рзНржкрж╖рзНржЯ: **Inventory ржкрзНрж░ржЬрзЗржХрзНржЯрзЗ `db:seed` ржжрж┐рж▓рзЗ ржпрзЗржи рж╢рзБржзрзБ Role & Permission рж╕ржВржХрзНрж░рж╛ржирзНржд Seeder ржЧрзБрж▓рзЛ ржЪрж╛рж▓рж╛ржирзЛ рж╣рзЯ**, ржмрж╛ржХрж┐ Seeders ржпрзЗржи ржЪрж▓ржмрзЗ ржирж╛ред

---

## тЬЕ рж╕ржорж╛ржзрж╛ржи рзз: **ржирж┐рж░рзНржжрж┐рж╖рзНржЯ Seeder ржХрж▓ ржХрж░рж╛ (Best Practice)**

ржпржжрж┐ рждрзБржорж┐ рж╢рзБржзрзБ Role & Permission seed ржЪрж╛рж▓рж╛рждрзЗ ржЪрж╛ржУ, рждрж╛рж╣рж▓рзЗ ржирж┐ржЪрзЗрж░ ржорждрзЛ ржХрж░рзЗ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ Seeder ржХрж▓ ржХрж░рждрзЗ ржкрж╛рж░рзЛ:

```bash
php artisan db:seed --class=RoleSeeder
php artisan db:seed --class=PermissionSeeder
php artisan db:seed --class=UserSeeder
php artisan db:seed --class=RolePermissionSeeder
```

ржПржнрж╛ржмрзЗ ржПржХ ржПржХ ржХрж░рзЗ ржЕржержмрж╛ рж╕рзНржХрзНрж░рж┐ржкрзНржЯ ржмрж╛ржирж┐рзЯрзЗ ржПржХрж╕рж╛ржерзЗ ржЪрж╛рж▓рж╛рждрзЗ ржкрж╛рж░рзЛред ржПрждрзЗ ржЗржиржнрзЗржирзНржЯрж░рж┐рж░ ржмрж╛ржХрж┐ Seeders ржПржХржЯрж┐ржУ ржЪрж▓ржмрзЗ ржирж╛ред

---

## тЬЕ рж╕ржорж╛ржзрж╛ржи рзи: **Custom Seeder Wrapper рждрзИрж░рж┐ ржХрж░рж╛**

`RolePermissionSeederGroup.php` ржирж╛ржорзЗ ржирждрзБржи ржПржХржЯрж┐ Seeder ржмрж╛ржирж╛ржУ:

```php
php artisan make:seeder RolePermissionSeederGroup
```

рждрж╛рж░ржкрж░ ржПрждрзЗ ржПржЗржнрж╛ржмрзЗ ржпрзБржХрзНржд ржХрж░рзЛ:

```php
<?php

namespace Database\Seeders;

use Illuminate\Database\Seeder;

class RolePermissionSeederGroup extends Seeder
{
    public function run(): void
    {
        $this->call([
            RoleSeeder::class,
            PermissionSeeder::class,
            UserSeeder::class,
            RolePermissionSeeder::class,
        ]);
    }
}
```

ржПржЦржи рждрзБржорж┐ рж╢рзБржзрзБ ржПржЗ ржХржорж╛ржирзНржбржЯрж┐ ржЪрж╛рж▓рж╛рж▓рзЗржЗ рж╣ржмрзЗ:

```bash
php artisan db:seed --class=RolePermissionSeederGroup
```

---

## тЪая╕П рж╕рждрж░рзНржХрждрж╛:

> рждрзБржорж┐ ржпржжрж┐ `DatabaseSeeder` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЛ ржПржмржВ рж╕рзЗржЦрж╛ржирзЗ ржЗржиржнрзЗржирзНржЯрж░рж┐ рж░рж┐рж▓рзЗржЯрзЗржб Seeders ржХрж▓ ржХрж░рж╛ ржерж╛ржХрзЗ, рждрж╛рж╣рж▓рзЗ `php artisan db:seed` ржжрж┐рж▓рзЗ рж╕рзЗржЧрзБрж▓рзЛ рж╕ржм ржЪрж▓ржмрзЗржЗред

---

## ЁЯз╣ ржЕрждрж┐рж░рж┐ржХрзНржд ржЯрж┐ржк:

`UserSeeder` ржжрзБржЗ ржЬрж╛рзЯржЧрж╛рзЯржЗ ржЖржЫрзЗ (Role permission ржУ Inventory)ред
ржпржжрж┐ ржПржХржЗ ржирж╛ржорзЗрж░ Seeder ржерж╛ржХрзЗ, рждрж╛рж╣рж▓рзЗ ржХрзНрж▓рж╛рж╕рзЗ ржнрж┐ржирзНржи namespace ржмрж╛ prefix ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЛ ржирзЯрждрзЛ ржбрзБржкрзНрж▓рж┐ржХрзЗржЯ ржХрзНрж▓рж╛рж╕ ржбрж┐ржлрж┐ржирж┐рж╢ржи ржПрж░рж░ рж╣рждрзЗ ржкрж╛рж░рзЗред

---

### ЁЯФЪ рж╕ржВржХрзНрж╖рзЗржкрзЗ:

* рж╢рзБржзрзБ Role-Permission Seeder ржЪрж╛рж▓рж╛рждрзЗ ржЪрж╛ржЗрж▓рзЗ `--class` ржжрж┐рзЯрзЗ ржЪрж╛рж▓рж╛ржУред
* ржЕржержмрж╛ wrapper рж╕рж┐ржбрж╛рж░ (ржпрзЗржоржи `RolePermissionSeederGroup`) ржмрж╛ржирж┐рзЯрзЗ centrally ржХрж▓ ржХрж░рзЛред

ржмрж▓рж▓рзЗ ржЖржорж┐ рждрзЛржорж╛рж░ ржЬржирзНржп рж╕рзЗржЗ Custom Seeder ржлрж╛ржЗрж▓ рж▓рж┐ржЦрзЗ ржжрж┐рзЯрзЗ ржжрж┐ржЪрзНржЫрж┐ред









рждрзЛржорж╛рж░ ржкрзНрж░рж╢рзНржиржЯрж╛ **ржкрзНрж░ржХрзГржд Laravel architecture ржмрзЛржЭрж╛рж░ ржХрзНрж╖рзЗрждрзНрж░рзЗ ржЦрзБржм ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг** тАФ ржмрж┐рж╢рзЗрж╖ ржХрж░рзЗ ржмрзЬ ржкрзНрж░ржЬрзЗржХрзНржЯрзЗ ржпрзЗржЦрж╛ржирзЗ multiple modules ржмрж╛ domains (Inventory, Role-Permission ржЗрждрзНржпрж╛ржжрж┐) ржерж╛ржХрзЗред

ржПржЦржи рждрзЛржорж╛рж░ ржжрзБржЗржЯрж╛ ржорзВрж▓ рж╕ржорж╕рзНржпрж╛:

---

## ЁЯФ┤ **рж╕ржорж╕рзНржпрж╛ рзз: `DatabaseSeeder` рж╕ржм Seeders ржЪрж╛рж▓рж┐рзЯрзЗ ржжрзЗрзЯ**

ржпржЦржи рждрзБржорж┐ ржЪрж╛рж▓рж╛ржУ:

```bash
php artisan db:seed
```

рждржЦржи Laravel ржбрж┐ржлрж▓рзНржЯржнрж╛ржмрзЗ `DatabaseSeeder::run()` ржорзЗржержб ржЪрж╛рж▓рж╛рзЯред ржпржжрж┐ рж╕рзЗржЦрж╛ржирзЗ Inventory ржПржмржВ Role-Permission ржжрзБржЯрзЛржЗ ржХрж▓ ржХрж░рж╛ ржерж╛ржХрзЗ:

```php
$this->call([
    CategorySeeder::class,
    UnitSeeder::class,
    ProductSeeder::class,
    RoleSeeder::class,
    PermissionSeeder::class,
    ...
]);
```

тЮбя╕П рждрж╛рж╣рж▓рзЗ рж╕ржмржЗ ржЪрж▓рзЗ ржпрж╛ржмрзЗред рждрзБржорж┐ ржЪрж╛ржЗрж▓рзЗржУ ржЖрж▓рж╛ржжрж╛ ржХрж░рзЗ рж╢рзБржзрзБ Role-Permission ржЪрж╛рж▓рж╛рждрзЗ ржкрж╛рж░ржмрзЗ ржирж╛ред

---

## ЁЯЯв **рж╕ржорж╛ржзрж╛ржи: ржЖрж▓рж╛ржжрж╛ Custom Seeder Group ржлрж╛ржЗрж▓ рждрзИрж░рж┐ ржХрж░рж╛**

ржЖржорж░рж╛ `RolePermissionSeederGroup.php` ржирж╛ржорзЗ ржЖрж▓рж╛ржжрж╛ Seeder ржмрж╛ржирж╛ржмрзЛ тАФ ржпрзЗржЯрж╛ рж╢рзБржзрзБржорж╛рждрзНрж░ Role-Permission seeders ржЪрж╛рж▓рж╛ржмрзЗред

### ЁЯФз **ржзрж╛ржк рзз: Custom Seeder ржлрж╛ржЗрж▓ рждрзИрж░рж┐ ржХрж░рзЛ**

```bash
php artisan make:seeder RolePermissionSeederGroup
```

### тЬНя╕П `RolePermissionSeederGroup.php` ржлрж╛ржЗрж▓ржЯрж┐ ржПржнрж╛ржмрзЗ рж▓рж┐ржЦрзЛ:

```php
<?php

namespace Database\Seeders;

use Illuminate\Database\Seeder;

class RolePermissionSeederGroup extends Seeder
{
    public function run(): void
    {
        $this->call([
            RoleSeeder::class,
            PermissionSeeder::class,
            UserSeederForRolePermission::class,
            RolePermissionSeeder::class,
        ]);
    }
}
```

---

## ЁЯФ┤ **рж╕ржорж╕рзНржпрж╛ рзи: ржжрзБржЗржЯрж┐ ржЖрж▓рж╛ржжрж╛ `UserSeeder` ржлрж╛ржЗрж▓ тАФ ржирж╛ржо ржПржХржЗ**

Laravel ржП ржПржХржЗ ржирж╛ржорзЗ ржжрзБржЗржЯрж╛ Seeder ржлрж╛ржЗрж▓ ржерж╛ржХрждрзЗ ржкрж╛рж░ржмрзЗ ржирж╛ (`UserSeeder`)ред ржПрж░ ржлрж▓рзЗ ржирж┐ржЪрзЗрж░ error ржЖрж╕ржмрзЗ:

> `Cannot declare class Database\Seeders\UserSeeder, because the name is already in use`

---

## ЁЯЯв **рж╕ржорж╛ржзрж╛ржи: ржжрзБржЗржЯрж┐ `UserSeeder` ржПрж░ ржЖрж▓рж╛ржжрж╛ ржирж╛ржо ржжрзЗрзЯрж╛**

1. **Inventory-ржПрж░ `UserSeeder` ржЖржЧрзЗрж░ ржорждрзЛ ржерж╛ржХржмрзЗред**
2. **Role Permission-ржПрж░ `UserSeeder`-ржПрж░ ржирж╛ржо ржмржжрж▓рзЗ ржжрж╛ржУ:** ржпрзЗржоржи `UserSeederForRolePermission.php`

```bash
mv database/seeders/UserSeeder.php database/seeders/UserSeederForRolePermission.php
```

рждрж╛рж░ржкрж░ ржлрж╛ржЗрж▓рзЗрж░ ржнрж┐рждрж░рзЗ ржХрзНрж▓рж╛рж╕ ржирж╛ржо ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рзЛ:

```php
<?php

namespace Database\Seeders;

use App\Models\User;
use Illuminate\Database\Seeder;
use Spatie\Permission\Models\Role;

class UserSeederForRolePermission extends Seeder
{
    public function run(): void
    {
        $user = User::create([
            'name' => 'Ahmad',
            'email' => 'ahmad@gmail.com',
            'password' => bcrypt('12345678'),
        ]);

        $role = Role::where('name', 'super-admin')->first();
        $user->assignRole($role);
    }
}
```

---

## тЬЕ ржПржЦржи рждрзБржорж┐ рж╢рзБржзрзБ Role Permission Seeder ржЪрж╛рж▓рж╛рждрзЗ ржкрж╛рж░ржмрзЗ ржПржЗржнрж╛ржмрзЗ:

```bash
php artisan db:seed --class=RolePermissionSeederGroup
```

тЮбя╕П ржПрждрзЗ Inventory Seeders ржПржХржЯрж┐ржУ ржЪрж▓ржмрзЗ ржирж╛ред
тЮбя╕П `UserSeeder` ржирж╛ржо ржХрзНрж▓рзНржпрж╛рж╢ ржХрж░ржмрзЗ ржирж╛ред

---

ЁЯФЪ **рж╕ржВржХрзНрж╖рзЗржкрзЗ:**

* `DatabaseSeeder` ржерзЗржХрзЗ рж╕ржм рж╕рж┐ржбрж╛рж░ ржирж╛ ржЪрж╛рж▓рж┐рзЯрзЗ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ Seeder ржХрж▓ ржХрж░рзЛред
* ржжрзБржЗржЯрж╛ `UserSeeder` ржПржХрж╕рж╛ржерзЗ рж░рж╛ржЦрждрзЗ рж╣рж▓рзЗ ржнрж┐ржирзНржи ржирж╛ржо (ржпрзЗржоржи `UserSeederForRolePermission`) ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЛред
* Custom Seeder Group (`RolePermissionSeederGroup`) ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЛ рж╢рзБржзрзБ Role-Permission ржЪрж╛рж▓рж╛ржирзЛрж░ ржЬржирзНржпред

рждрзЛржорж╛рж░ ржЪрж╛ржЗрж▓рзЗ ржЖржорж┐ ржкрзБрж░рзЛ ржлрзЛрж▓рзНржбрж╛рж░ рж╕рзНржЯрзНрж░рж╛ржХржЪрж╛рж░ ржПржмржВ рж╕ржВрж╢рзЛржзрж┐ржд Seeder ржЧрзБрж▓рзЛ ржбрзЗрж▓рж┐ржнрж╛рж░ ржХрж░рж╛рж░ ржорждрзЛ ржХрж░рзЗ рж╕рж╛ржЬрж┐рзЯрзЗ ржжрж┐рждрзЗ ржкрж╛рж░рж┐ред ржмрж▓рзЛ, рждрж╛рж╣рж▓рзЗ ржХрж░рзЗ ржжрж┐ржЗред









рждрзЛржорж╛рж░ ржкрзНрж░рж╢рзНржиржЯрж╛ ржПржХрзЗржмрж╛рж░рзЗ ржЬрж╛рзЯржЧрж╛ржорждрзЛ тАФ тЬЕ **`SuperAdminSeeder` ржжрж░ржХрж╛рж░ рж╣ржмрзЗ ржХрж┐ ржирж╛, рж╕рзЗржЯрж╛ ржирж┐рж░рзНржнрж░ ржХрж░рзЗ `UserSeederForRolePermission` ржХрзА ржХрж░ржЫрзЗред**

---

## ЁЯФО ржЪрж▓ ржжрзЗржЦрж┐, `SuperAdminSeeder` ржХрзА ржХрж╛ржЬ ржХрж░ржЫрзЗ:

```php
$user = User::create([
    'name' => 'Ahmad',
    'email' => 'ahmad@gmail.com',
    'password' => Hash::make('12345678'),
]);

$role = Role::where('name', 'super-admin')->first();
$user->syncRoles($role);
```

ржПржмржВ `UserSeederForRolePermission`-ржПржУ:

```php
$user = User::create([
    'name' => 'Ahmad',
    'email' => 'ahmad@gmail.com',
    'password' => bcrypt('12345678'),
]);

$role = Role::where('name', 'super-admin')->first();
$user->assignRole($role);
```

---

## тЬЕ рждрж╛рж╣рж▓рзЗ, ржжрзБржЗржЯрж╛ ржХрж╛ржЬ ржкрзНрж░рж╛рзЯ ржПржХржЗ:

* ржЗржЙржЬрж╛рж░ рждрзИрж░рж┐ ржХрж░рж╛
* super-admin role ржЕрзНржпрж╛рж╕рж╛ржЗржи ржХрж░рж╛

---

## ЁЯФД ржкрж╛рж░рзНржержХрзНржп:

* `assignRole()` рж╢рзБржзрзБ role ржЕрзНржпрж╛ржб ржХрж░рзЗ
* `syncRoles()` ржЖржЧрзЗ рж╕ржм рж░рзЛрж▓ ржорзБржЫрзЗ ржжрж┐рзЯрзЗ ржирждрзБржиржЯрж╛ ржЕрзНржпрж╛ржб ржХрж░рзЗ

### тЬ│я╕П ржпржжрж┐ ржирж┐рж╢рзНржЪрж┐ржд рж╣ржУ ржпрзЗ ржЗржЙржЬрж╛рж░ рж╢рзБржзрзБ ржПржХржЯрж╛ржЗ рж░рзЛрж▓ ржкрж╛ржмрзЗ, рждрж╛рж╣рж▓рзЗ `syncRoles()` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЛред

### тЬ│я╕П ржпржжрж┐ ржПржХрж╛ржзрж┐ржХ рж░рзЛрж▓ ржЕрзНржпрж╛рж╕рж╛ржЗржи ржХрж░рждрзЗ ржЪрж╛ржУ, рждрж╛рж╣рж▓рзЗ `assignRole()` ржнрж╛рж▓рзЛред

---

## ЁЯОп рждрж╛рж╣рж▓рзЗ ржЙрждрзНрждрж░ рж╣рж▓рзЛ:

> ЁЯФ╣ **`SuperAdminSeeder` ржЖрж▓рж╛ржжрж╛ ржХрж░рзЗ ржЪрж╛рж▓рж╛рждрзЗ рж╣ржмрзЗ ржирж╛**, ржпржжрж┐ рждрзБржорж┐ `UserSeederForRolePermission`-ржП ржПржХржЗ ржХрж╛ржЬ ржХрж░рж┐рзЯрзЗ ржлрзЗрж▓рзЛред

тЮбя╕П ржмрж░ржВ clean рж░рж╛ржЦрж╛рж░ ржЬржирзНржп рждрзБржорж┐ `SuperAdminSeeder.php` **delete ржмрж╛ archive** ржХрж░рзЗ ржлрзЗрж▓рждрзЗ ржкрж╛рж░рзЛ, ржпрж╛рждрзЗ ржнржмрж┐рж╖рзНржпрждрзЗ ржжрзНржмржирзНржжрзНржм ржирж╛ рж╣рзЯред

---

## тЬНя╕П Final Checklist:

* тЬЕ `RoleSeeder`
* тЬЕ `PermissionSeeder`
* тЬЕ `UserSeederForRolePermission` (with `assignRole()` ржмрж╛ `syncRoles()`)
* тЬЕ `RolePermissionSeeder`

тЮбя╕П ржПржЗ ржЪрж╛рж░ржЯрж╛ржЗ ржпржерзЗрж╖рзНржЯред

---

ржкрзНрж░рзЯрзЛржЬржирзЗ ржЖржорж┐ рждрзЛржорж╛рж░ ржЬржирзНржп `RolePermissionSeederGroup`-ржПрж░ ржЪрзВрзЬрж╛ржирзНржд ржХрзЛржбржЯрж╛ ржЖржмрж╛рж░ рж▓рж┐ржЦрзЗ ржжрж┐рждрзЗ ржкрж╛рж░рж┐, ржЪрж╛ржЗрж▓рзЗ ржмрж▓рзЛред









рждрзЛржорж╛рж░ ржПржЗ ржПрж░рж░ржЯрж╛ рж╣рж▓рзЛ Laravel ржПрж░ `users` ржЯрзЗржмрж┐рж▓рзЗрж░ `username` ржлрж┐рж▓рзНржбржЯрж┐ **nullable ржирж╛**, ржПржмржВ Seeder-ржП `username` ржжрзЗржУрзЯрж╛ рж╣рзЯржирж┐ред

---

## ЁЯзи **ржПрж░рж░ ржмрзНржпрж╛ржЦрзНржпрж╛:**

```bash
SQLSTATE[HY000]: General error: 1364 Field 'username' doesn't have a default value
```

ржорж╛ржирзЗ `users` ржЯрзЗржмрж┐рж▓рзЗрж░ `username` ржХрж▓рж╛ржорзЗ **ржирж╛ рждрзЛ `default` ржЖржЫрзЗ, ржирж╛ рждрзЛ `nullable` ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ**, ржЖрж░ рждрзБржорж┐ `insert` ржПрж░ рж╕ржорзЯ ржПржЗ ржлрж┐рж▓рзНржбржЯрж╛рзЯ ржХрж┐ржЫрзБржЗ ржжрж╛ржУржирж┐ред

---

## тЬЕ рж╕ржорж╛ржзрж╛ржи рзз: Seeder ржП `username` ржпрзБржХрзНржд ржХрж░рзЛ

`UserSeederForRolePermission.php` ржлрж╛ржЗрж▓рзЗ ржПржЗржнрж╛ржмрзЗ ржХрзЛржб ржЖржкржбрзЗржЯ ржХрж░рзЛ:

```php
$user = User::create([
    'name' => 'Ahmad',
    'username' => 'ahmad', // тЬЕ ржПржЗ рж▓рж╛ржЗржиржЯрж╛ ржпрзЛржЧ ржХрж░рзЛ
    'email' => 'ahmad@gmail.com',
    'password' => bcrypt('12345678'),
]);
```

---

## ЁЯФБ ржмрж┐ржХрж▓рзНржк рж╕ржорж╛ржзрж╛ржи (ржпржжрж┐ `username` ржЪрж╛ржЗ ржирж╛)

### ржорж╛ржЗржЧрзНрж░рзЗрж╢ржирзЗ ржЧрж┐рзЯрзЗ `username` ржлрж┐рж▓рзНржбржЯрж╛ ржПржЗржнрж╛ржмрзЗ nullable ржХрж░рзЗ ржжрж╛ржУ:

```php
$table->string('username')->nullable();
```

рждрж╛рж░ржкрж░:

```bash
php artisan migrate:fresh
```

тЪая╕П ржПрждрзЗ рж╕ржм ржбрзЗржЯрж╛ ржорзБржЫрзЗ ржпрж╛ржмрзЗ, рждрж╛ржЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЛ ржХрзЗржмрж▓ dev ржмрж╛ test environment-ржПред

---

## тЬЕ рж░рж┐ржХрзНржпрж╛ржк:

* ржПрж░рж░ ржПрж╕рзЗржЫрзЗ ржХрж╛рж░ржг `username` ржХрж▓рж╛ржорзЗ ржХрж┐ржЫрзБ ржирж╛ ржжрж┐рзЯрзЗ ржбрзЗржЯрж╛ insert ржХрж░рждрзЗ ржЧрзЗржЫрзЛред
* Seeder ржлрж╛ржЗрж▓рзЗ `username` ржлрж┐рж▓рзНржб ржпрзЛржЧ ржХрж░рж▓рзЗржЗ рж╕ржорж╛ржзрж╛ржиред

ржЪрж╛ржЗрж▓рзЗ ржЖржорж┐ рждрзЛржорж╛рж░ `UserSeederForRolePermission` ржлрж╛ржЗрж▓ржЯрж╛ ржкрзБрж░рзЛ ржарж┐ржХ ржХрж░рзЗ ржжрж┐ржЪрзНржЫрж┐, рж╢рзБржзрзБ ржмрж▓рзЛред









тЬЕ рж╣рзНржпрж╛ржБ, ржПржЦржи рждрзБржорж┐ ржЖржмрж╛рж░ ржирж┐ржЪрзЗрж░ ржХржорж╛ржирзНржбржЯрж┐ ржЪрж╛рж▓рж╛рждрзЗ ржкрж╛рж░рзЛ:

```bash
php artisan db:seed --class=RolePermissionSeederGroup
```

ржХрж╛рж░ржг:

* рждрзБржорж┐ ржПржЦржи `username` ржлрж┐рж▓рзНржб ржарж┐ржХ ржХрж░рзЗ ржжрж┐рзЯрзЗржЫрзЛред
* ржЖржЧрзЗрж░ ржмрж╛рж░ рж╕рж┐ржбрж┐ржВ ржорж╛ржЭржкржерзЗ ржерзЗржорзЗ ржЧрж┐рзЯрзЗржЫрж┐рж▓, рждрж╛ржЗ ржПржЦржи ржЖржмрж╛рж░ ржЪрж╛рж▓рж╛рж▓рзЗ ржкрзБрж░рзЛ рж╕рж┐ржбрж┐ржВржЯрж╛ рж╕ржлрж▓ржнрж╛ржмрзЗ рж╢рзЗрж╖ рж╣ржмрзЗред

---

## ЁЯФБ ржХрж┐ржирзНрждрзБ ржЖржЧрзЗ ржпржжрж┐ ржПржХржЗ `email`-ржП ржЗржЙржЬрж╛рж░ ржврзБржХрзЗ ржерж╛ржХрзЗ?

рждрж╛рж╣рж▓рзЗ ржЖржмрж╛рж░ `insert` ржХрж░рждрзЗ ржЧрзЗрж▓рзЗ **duplicate entry** ржПрж░рж░ ржЖрж╕ржмрзЗред

### ЁЯФН рж╕ржорж╛ржзрж╛ржи:

Seeder-ржП ржврзЛржХрж╛ржирзЛрж░ ржЖржЧрзЗ ржЪрзЗржХ ржХрж░рждрзЗ ржкрж╛рж░рзЛ ржЗржЙржЬрж╛рж░ржЯрж╛ ржЖржЧрзЗ ржерзЗржХрзЗржЗ ржЖржЫрзЗ ржХрж┐ржирж╛:

```php
if (!User::where('email', 'ahmad@gmail.com')->exists()) {
    $user = User::create([
        'name' => 'Ahmad',
        'username' => 'ahmad',
        'email' => 'ahmad@gmail.com',
        'password' => bcrypt('12345678'),
    ]);

    $role = Role::where('name', 'super-admin')->first();
    $user->assignRole($role);
}
```

ржПржнрж╛ржмрзЗ ржХрж░рж▓рзЗ ржПржХрж╛ржзрж┐ржХржмрж╛рж░ рж╕рж┐ржб ржЪрж╛рж▓рж╛рж▓рзЗржУ рж╕ржорж╕рзНржпрж╛ рж╣ржмрзЗ ржирж╛ред

---

ЁЯЯв ржПржЦржи ржЪрж╛ржЗрж▓рзЗ рждрзБржорж┐ рж╕рзЗржлрж▓рж┐ `db:seed` ржЪрж╛рж▓рж┐рзЯрзЗ ржжрзЗржЦрждрзЗ ржкрж╛рж░рзЛред ржкрзНрж░рзЯрзЛржЬржи рж╣рж▓рзЗ ржЖржорж┐ ржЪрзЗржХ ржХрж░рзЗ ржЖрж░ ржХрзЛржирзЛ collision ржерж╛ржХрж▓рзЗ рж╕рзЗржЯрж╛ржУ ржзрж░рзЗ ржжрж┐рждрзЗ ржкрж╛рж░рж┐ред









ЁЯФН ржЦрзБржм ржнрж╛рж▓рзЛ ржкрзНрж░рж╢рзНржи тАФ ржПржмржВ рждрзЛржорж╛рж░ ржЪрж┐ржирзНрждрж╛ ржПржХржжржо ржмрж╛рж╕рзНрждржмрж╕ржорзНржорждред

рждрзБржорж┐ ржпржжрж┐ ржЖржмрж╛рж░ ржПржЗ ржХржорж╛ржирзНржб ржжрж╛ржУ:

```bash
php artisan db:seed --class=RolePermissionSeederGroup
```

рждрж╛рж╣рж▓рзЗ ржЕржмрж╢рзНржпржЗ ржЖржмрж╛рж░ ржПржЗ рж╕ржмржЧрзБрж▓рзЛ рж╕рж┐ржбрж╛рж░ ржЪрж╛рж▓ржмрзЗ:

* `RoleSeeder`
* `PermissionSeeder`
* `UserSeederForRolePermission`
* `RolePermissionSeeder`

---

## ЁЯФз рждрж╛рж╣рж▓рзЗ ржкрзНрж░рж╢рзНржи рж╣рж▓рзЛ тАФ **ржПржЧрзБрж▓рзЛ ржмрж╛рж░ржмрж╛рж░ ржЪрж╛рж▓рж╛рж▓рзЗ рж╕ржорж╕рзНржпрж╛ рж╣ржмрзЗ ржХрж┐ ржирж╛?**

### тЬЕ **1. `RoleSeeder`**

```php
Role::create(['name' => 'super-admin']);
```

* ржпржжрж┐ `roles` ржЯрзЗржмрж┐рж▓рзЗ ржПржХржЗ ржирж╛ржорзЗрж░ рж░рзЛрж▓ ржЖржЧрзЗ ржерзЗржХрзЗржЗ ржерж╛ржХрзЗ, рждрж╛рж╣рж▓рзЗ **duplicate error ржЖрж╕ржмрзЗ**ред

### тЬЕ **2. `PermissionSeeder`**

```php
Permission::create(['name' => $permission]);
```

* ржЖржмрж╛рж░ржУ, ржпржжрж┐ permission ржЧрзБрж▓рзЛ ржЖржЧрзЗ ржерзЗржХрзЗржЗ ржерж╛ржХрзЗ, **duplicate entry error** ржЖрж╕рждрзЗ ржкрж╛рж░рзЗред

### тЬЕ **3. `RolePermissionSeeder`**

```php
$role->syncPermissions($permissions);
```

* ржПржЦрж╛ржирзЗ ржХрзЛржирзЛ рж╕ржорж╕рзНржпрж╛ ржирзЗржЗ, ржПржЯрж╛ ржмрж╛рж░ржмрж╛рж░ ржЪрж╛рж▓рж╛ржирзЛ safe тАФ ржПржЯрж┐ рж╢рзБржзрзБ рж░рж┐ржлрзНрж░рзЗрж╢ ржХрж░рзЗред

### тЬЕ **4. `UserSeederForRolePermission`**

* ржЖржЧрзЗржЗ ржЗржорзЗржЗрж▓-ржнрж┐рждрзНрждрж┐ржХ ржЪрзЗржХ ржХрж░рзЗ ржирж┐рж▓рзЗ safe рж╣ржмрзЗред

---

## ЁЯЫбя╕П Best Practice: ржмрж╛рж░ржмрж╛рж░ ржЪрж╛рж▓рж╛ржирзЛ ржпрж╛рзЯ ржПржоржи рж╕рж┐ржбрж╛рж░ ржмрж╛ржирж╛ржУ

**ржПржЦрж╛ржирзЗ ржЖржорж┐ рждрзЛржорж╛рж░ рждрж┐ржиржЯрж┐ Seeder ржирж┐рж░рж╛ржкржж ржХрж░рж╛рж░ ржЬржирзНржп ржЖржкржбрзЗржЯ ржжрж┐ржЪрзНржЫрж┐:**

### ЁЯФБ `RoleSeeder.php`

```php
if (!Role::where('name', 'super-admin')->exists()) {
    Role::create(['name' => 'super-admin']);
}
```

---

### ЁЯФБ `PermissionSeeder.php`

```php
foreach ($permissions as $permission) {
    Permission::firstOrCreate(['name' => $permission]);
}
```

---

### ЁЯФБ `UserSeederForRolePermission.php`

```php
if (!User::where('email', 'ahmad@gmail.com')->exists()) {
    $user = User::create([
        'name' => 'Ahmad',
        'username' => 'ahmad',
        'email' => 'ahmad@gmail.com',
        'password' => bcrypt('12345678'),
    ]);

    $role = Role::where('name', 'super-admin')->first();
    $user->assignRole($role);
}
```

---

## тЬЕ ржПржЦржи рждрзБржорж┐ ржпрзЗржХрзЛржирзЛ рж╕ржорзЯ ржмрж╛рж░ржмрж╛рж░ `RolePermissionSeederGroup` ржЪрж╛рж▓рж╛рждрзЗ ржкрж╛рж░рзЛ:

```bash
php artisan db:seed --class=RolePermissionSeederGroup
```

тЮбя╕П ржЖрж░ ржХрзЛржирзЛ рж╕ржорж╕рзНржпрж╛ рж╣ржмрзЗ ржирж╛, ржХрзЛржирзЛ ржбрзБржкрзНрж▓рж┐ржХрзЗржЯ error ржЖрж╕ржмрзЗ ржирж╛ред
ржЪрж╛ржЗрж▓рзЗ ржЖржорж┐ ржПржЗ рж╕рж┐ржбрж╛рж░ ржлрж╛ржЗрж▓ржЧрзБрж▓рзЛрж░ рж╕ржорзНржкрзВрж░рзНржг ржЖржкржбрзЗржЯрзЗржб рж╕ржВрж╕рзНржХрж░ржг ржмрж╛ржирж┐рзЯрзЗ ржжрж┐рждрзЗржУ ржкрж╛рж░рж┐ред









