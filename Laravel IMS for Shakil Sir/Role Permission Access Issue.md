ржзржирзНржпржмрж╛ржж рж╕рзБржирзНржжрж░ржнрж╛ржмрзЗ ржмрзЛржЭрж╛ржирзЛрж░ ржЬржирзНржпред рждрзБржорж┐ ржпрзЗржЯрж╛ ржмрж▓ржЫрзЛ, ржПржЯрж╛ рж╕ржорзНржнржмржд **authorization (permission check)** ржПрж░ ржХрж╛рж░ржгрзЗ рж╣ржЪрзНржЫрзЗред `edit` ржкрзЗржЬрзЗ ржврзБржХрждрзЗ ржЧрзЗрж▓рзЗ ржЗржЙржЬрж╛рж░рзЗрж░ ржХрзЛржи ржПржХржЯрж╛ ржкрж╛рж░ржорж┐рж╢ржи ржЪрзЗржХ рж╣ржЪрзНржЫрзЗ, ржЖрж░ рж╕рзЗржЯрж╛ ржЗржиржнрзЗржирзНржЯрж░рж┐ ржкрзНрж░ржЬрзЗржХрзНржЯрзЗ ржарж┐ржХржнрж╛ржмрзЗ рж╕рзЗржЯржЖржк ржирж╛ рж╣ржУрзЯрж╛рзЯ access denied ржжрзЗржЦрж╛ржЪрзНржЫрзЗред

рж╕ржорж╛ржзрж╛ржи ржжрж┐рждрзЗ рж╣рж▓рзЗ ржЖржорж┐ ржирж┐ржЪрзЗрж░ ржЗржиржлрзЛржЧрзБрж▓рзЛ ржЪрж╛ржЗ:

1. **Routes (web.php ржмрж╛ api.php)** тАФ ржпрзЗржЯрж╛рждрзЗ `edit` route ржбрж┐ржлрж╛ржЗржи ржХрж░рж╛ ржЖржЫрзЗред
2. **Controller method** тАФ ржпрзЗржЯрж╛рждрзЗ edit ржЕржкрж╢ржирзЗрж░ logic ржЖржЫрзЗ (`edit()` method)ред
3. **Middleware/Policy/Gate ржмрзНржпржмрж╣рж╛рж░ рж╣ржЪрзНржЫрзЗ ржХрж┐ржирж╛ рж╕рзЗржЯрж╛** тАФ ржпрзЗржоржи `can:edit-user`, `authorize()`, ржмрж╛ `Gate::allows()` ржЗрждрзНржпрж╛ржжрж┐ред
4. **Role & Permission ржбрж╛ржЯрж╛** тАФ рждрзБржорж┐ ржпрзЗржнрж╛ржмрзЗ ржЗржЙржЬрж╛рж░рзЗрж░ role ржУ permission рж╕рзЗржЯ ржХрж░рзЛ ржПржмржВ ржЪрзЗржХ ржХрж░рзЛ (e.g. Spatie package?)
5. **Error ржкрзЗржЬрзЗ ржХрзА ржорзЗрж╕рзЗржЬ ржжрзЗржЦрж╛рзЯ?** тАФ Laravel-ржПрж░ `403`, `404`, `500`, ржирж╛ custom ржХрзЛржирзЛ error message?

ржпржжрж┐ ржкрж╛рж░рзЛ рждрж╛рж╣рж▓рзЗ `routes/web.php`, `UserController`, ржПржмржВ `Policy` ржмрж╛ `Middleware` ржпржжрж┐ ржерж╛ржХрзЗ рждрж╛рж░ ржХрзЛржбржЧрзБрж▓рзЛ ржжрж╛ржУред ржЖрж░ ржпржжрж┐ `Spatie Laravel Permission` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржерж╛ржХрзЛ, рждрж╛рж╣рж▓рзЗ `permission` ржПржмржВ `role` ржПрж░ seed ржмрж╛ ржЯрзЗржмрж┐рж▓ ржбрж╛ржЯрж╛ ржЬрж╛ржирж╛рж▓рзЗржУ ржнрж╛рж▓рзЛ рж╣рзЯред

рждрзБржорж┐ ржЪрж╛ржЗрж▓рзЗ `.zip` ржЖржХрж╛рж░рзЗ ржЗржиржнрзЗржирзНржЯрж░рж┐ ржкрзНрж░ржЬрзЗржХрзНржЯрзЗрж░ рж╕ржВрж╢рзНрж▓рж┐рж╖рзНржЯ ржЕржВрж╢рзЗрж░ ржХрзЛржб ржЖржкрж▓рзЛржб ржХрж░рждрзЗржУ ржкрж╛рж░рзЛред рждрж╛рж╣рж▓рзЗ рж╕рж░рж╛рж╕рж░рж┐ ржжрзЗржЦрзЗ ржмрж▓рждрзЗ ржкрж╛рж░ржмрзЛ ржХрзЛржи ржЬрж╛рзЯржЧрж╛рзЯ рж╕ржорж╕рзНржпрж╛ред









рж╣рзНржпрж╛ржБ, **Laravel Debugbar** ржПрж░ ржбрзЗржЯрж╛ ржжрж┐рж▓рзЗ ржЕржирзЗржХ рж╣рзЗрж▓рзНржк рж╣ржмрзЗтАФржмрж┐рж╢рзЗрж╖ ржХрж░рзЗ ржпржжрж┐ рждрзБржорж┐ рж╕рзЗржЗ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯрзЗ ржХрзНрж▓рж┐ржХ ржХрж░рзЛ ржпрзЗржЯрж╛ `Edit` ржкрзЗржЬ ржУржкрзЗржи ржХрж░рж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзЗ ржПржмржВ **403 ржмрж╛ error ржжрзЗржЦрж╛рзЯ**ред рждржЦржи debugbar ржерзЗржХрзЗ ржЖржорж░рж╛ ржжрзЗржЦрждрзЗ ржкрж╛рж░ржмрзЛ:

* ржХрзЛржи **route** рж╣рж┐ржЯ рж╣рзЯрзЗржЫрзЗред
* ржХрзЛржи **middleware** ржЪрж▓рзЗ ржЧрзЗржЫрзЗред
* ржХрзЛржи **controller method** рж░рж╛ржи рж╣рзЯрзЗржЫрзЗ ржмрж╛ рж╣рзЯржирж┐ред
* **Gate ржмрж╛ Policy** ржмрзНржпрж░рзНрже рж╣рзЯрзЗржЫрзЗ ржХрж┐ржирж╛ред
* **User** ржПрж░ role ржмрж╛ permission ржХрзА ржЫрж┐рж▓ рж╕рзЗржЗ ржорзБрж╣рзВрж░рзНрждрзЗред

рждрзБржорж┐ ржпржжрж┐ Debugbar ржПрж░ **Request**, **Messages**, ржПржмржВ **Gate** tab ржПрж░ screenshot ржмрж╛ exported data ржжрж┐рждрзЗ ржкрж╛рж░рзЛ, рждрж╛рж╣рж▓рзЗ рж╕рзЗржЯрж╛ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг ржХрж░рзЗ ржЖржорж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржХрж░рзЗ ржмрж▓рждрзЗ ржкрж╛рж░ржмрзЛ рж╕ржорж╕рзНржпрж╛ ржХрзЛржерж╛рзЯред

рждрзБржорж┐ ржЪрж╛ржЗрж▓рзЗ Debugbar ржПрж░ `.zip` ржмрж╛ `.json` ржЖржХрж╛рж░рзЗ ржбрзЗржЯрж╛ ржЖржкрж▓рзЛржб ржХрж░рзЛ, ржЕржержмрж╛ рж╕рзНржХрзНрж░рж┐ржирж╢ржЯ ржжрж╛ржУ тАУ ржпрзЗржЯрж╛ рж╕рж╣ржЬ рж╣рзЯ рждрзЛржорж╛рж░ ржЬржирзНржпред









ржзржирзНржпржмрж╛ржж ржбрж┐ржмрж╛ржЧржмрж╛рж░ ржбрзЗржЯрж╛ ржжрзЗржУрзЯрж╛рж░ ржЬржирзНржпред рждрзЛржорж╛рж░ рж╕ржорж╕рзНржпрж╛ржЯрж╛ ржПржЦржи ржПржХржжржо ржкрж░рж┐рж╖рзНржХрж╛рж░:

### ЁЯФН рж╕ржорж╕рзНржпрж╛рж░ ржорзВрж▓ ржХрж╛рж░ржг:

`No query results for model [App\Models\User] 1` тАУ ржЕрж░рзНржерж╛рзО Laravel edit ржкрзЗржЬрзЗ `User` ржоржбрзЗрж▓рзЗрж░ ржЖржЗржбрж┐ 1 ржжрж┐рзЯрзЗ ржЗржЙржЬрж╛рж░ ржЦрзБржБржЬрждрзЗ ржЧрж┐рзЯрзЗ ржкрж╛рзЯржирж┐, рждрж╛ржЗ `ModelNotFoundException` ржжрж┐рзЯрзЗржЫрзЗред

ржПржЦрж╛ржирзЗ ржжрзБржЗржЯрж╛ рж╕ржорзНржнрж╛ржмрзНржп ржХрж╛рж░ржг ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗ:

---

### тЬЕ рж╕ржорж╛ржзрж╛ржи:

#### ЁЯФ╣ рзз. ржЗржЙржЬрж╛рж░ ржЖрж╕рж▓рзЗржЗ ржПржХрзНрж╕рж┐рж╕рзНржЯ ржХрж░рзЗ ржХрж┐ ржирж╛ ржЪрзЗржХ ржХрж░рзЛ

Laravel-ржПрж░ `edit` рж░рзБржЯрзЗ `/user/1/edit` рж╣рж┐ржЯ ржХрж░рж▓рзЗ `User::findOrFail(1)` ржЯрж╛ржЗржк ржХржиржнрж╛рж░рзНрж╢ржи рж╣рзЯред ржХрж┐ржирзНрждрзБ ржпржжрж┐ `id = 1` ржЗржЙржЬрж╛рж░ржЯрж┐ ржбрж╛ржЯрж╛ржмрзЗржЬрзЗ ржирж╛ ржерж╛ржХрзЗ, рждрж╛рж╣рж▓рзЗ ржПржЗ ржПрж░рж░ ржЖрж╕ржмрзЗржЗред

**ржЪрзЗржХ ржХрж░рзЛ:**

```bash
php artisan tinker

>>> App\Models\User::find(1);
```

ржпржжрж┐ null ржЖрж╕рзЗ, рждрж╛рж╣рж▓рзЗ ржУржЗ ржЗржЙржЬрж╛рж░ ржПржХрзНрж╕рж┐рж╕рзНржЯ ржХрж░ржЫрзЗ ржирж╛ред

ЁЯСЙ рж╕рж▓рж┐ржЙрж╢ржи: рж╣рзЯ ржбрж╛ржЯрж╛ржмрзЗржЬрзЗ ржЗржЙржЬрж╛рж░ ржпрзБржХрзНржд ржХрж░рзЛ, ржирж╛ рж╣рж▓рзЗ ржЗржЙржЬрж╛рж░ ржЖржЗржбрж┐ ржарж┐ржХ ржХрж░рзЗ route ржП ржкрж╛ржарж╛ржУред

---

#### ЁЯФ╣ рзи. Route model binding ржХрж╛рж╕рзНржЯржорж╛ржЗржЬ ржХрж░рж╛ рж▓рж╛ржЧрждрзЗ ржкрж╛рж░рзЗ

рждрзБржорж┐ ржпржжрж┐ URL-ржП ID ржмрж╛ржж ржжрж┐рзЯрзЗ ржЕржирзНржп ржХрж┐ржЫрзБ (ржпрзЗржоржи username ржмрж╛ slug) ржжрж╛ржУ, ржХрж┐ржирзНрждрзБ Laravel model binding ржПрж░ `getRouteKeyName()` override ржирж╛ ржХрж░рзЛ, рждрж╛рж╣рж▓рзЗ `User::find()` ржмрзНржпрж░рзНрже рж╣ржмрзЗред

ржП ржХрзНрж╖рзЗрждрзНрж░рзЗ `App\Models\User` ржоржбрзЗрж▓рзЗ ржПржЯрж╛ ржЪрзЗржХ ржХрж░рзЛ:

```php
public function getRouteKeyName()
{
    return 'id'; // ржирж┐рж╢рзНржЪрж┐ржд рж╣ржУ ржПржЯрж╛ 'id' ржЖржЫрзЗ, ржпржжрж┐ ржХрж┐ржЫрзБ override ржХрж░рзЗ ржерж╛ржХрзЛ
}
```

---

#### ЁЯФ╣ рзй. ржнрзБрж▓ environment ржП ржХрж╛ржЬ рж╣ржЪрзНржЫрзЗ ржХрж┐ ржирж╛ (ржЙржжрж╛рж╣рж░ржгрж╕рзНржмрж░рзВржк: `production` vs `local`)

`edit` рж░рзБржЯрзЗ `/user/1/edit` ржжрж┐рж▓рзЗ ржирж┐рж╢рзНржЪрж┐ржд рж╣ржУ ржпрзЗ **рждрзЛржорж╛рж░ current logged-in ржЗржЙржЬрж╛рж░рзЗрж░ ржХрж╛ржЫрзЗ `update user` permission ржЖржЫрзЗ**ред ржХрж╛рж░ржг middleware ржП ржПржЯрж╛ ржмрж╕рж╛ржирзЛ ржЖржЫрзЗ:

```php
middleware => web, auth, permission:update user
```

рждрж╛рж╣рж▓рзЗ рзиржЯрж┐ ржЬрж┐ржирж┐рж╕ ржЪрзЗржХ ржХрж░рждрзЗ рж╣ржмрзЗ:

* Logged-in user ржХрж┐ `update user` permission ржкрзЗрзЯрзЗржЫрзЗ?
* Middleware ржарж┐ржХ ржорждрзЛ ржХрж╛ржЬ ржХрж░ржЫрзЗ?

---

### ЁЯФз ржжрзНрж░рзБржд ржЯрзЗрж╕рзНржЯ ржХрж░рж╛рж░ ржЬржирзНржп:

ржПржЗ рж░рж╛ржЙржЯржЯрж╛ `routes/web.php` ржП ржирж┐ржЪрзЗрж░ ржорждрзЛ ржХрж░рзЗ `dd($user)` ржжрж┐рзЯрзЗ ржЪрзЗржХ ржХрж░рждрзЗ ржкрж╛рж░рзЛ:

```php
Route::get('/user/{user}/edit', function(App\Models\User $user) {
    dd($user);
})->middleware(['web', 'auth', 'permission:update user']);
```

ржПржЗржнрж╛ржмрзЗ рж╕рж╣ржЬрзЗ ржмрзЛржЭрж╛ ржпрж╛ржмрзЗ `User` ржкрж╛ржУрзЯрж╛ ржпрж╛ржЪрзНржЫрзЗ ржХрж┐ ржирж╛ред

---

### ЁЯУМ рж╢рзЗрж╖ ржХржерж╛:

ржПржЯрж╛ Laravel ржПрж░ Route Model Binding issue, permission issue ржирж╛ред ржЗржЙржЬрж╛рж░ ржЖржЗржбрж┐ ржжрж┐рзЯрзЗ query ржЪрж╛рж▓рж┐рзЯрзЗ `User` ржирж╛ ржкрж╛ржУрзЯрж╛рзЯ error ржЖрж╕ржЫрзЗред

ржЪрж╛ржЗрж▓рзЗ `edit()` ржорзЗржержб ржУ route ржЧрзБрж▓рзЛ рж╢рзЗрзЯрж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░рзЛ тАФ ржЖржорж┐ confirm ржХрж░рзЗ ржжрзЗржЦрзЗ ржжрж┐рждрзЗ ржкрж╛рж░ржмрзЛред









ржнрж╛рж▓рзЛ ржХрж░рзЗржЫрзЛ ржХрзЛржбржЧрзБрж▓рзЛ рж╢рзЗрзЯрж╛рж░ ржжрж┐рзЯрзЗред ржПржЦржи ржПржХрзЗржмрж╛рж░рзЗ ржкрж░рж┐рж╖рзНржХрж╛рж░:

---

### тЬЕ ржПржЦрж╛ржирзЗ ржХрзА рж╣ржЪрзНржЫрзЗ:

```php
Route::resource('/user', UsersController::class)->names('user');
```

ржПржЯрж╛ Laravel-ржПрж░ resourceful routing ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ, ржпрзЗржЦрж╛ржирзЗ `/user/{user}/edit` route-ржП automatic **Route Model Binding** рж╣ржЪрзНржЫрзЗ:

```php
public function edit(User $user)
```

Laravel `User` ржоржбрзЗрж▓ ржерзЗржХрзЗ `{user}` parameter ржжрж┐рзЯрзЗ `findOrFail()` ржЯрж╛ржЗржк ржПржХржЯрж╛ lookup ржХрж░рзЗ:

```php
App\Models\User::findOrFail($user);
```

---

### ЁЯШ╡ рж╕ржорж╕рзНржпрж╛:

ржпрзЗ URL ржП ржпрж╛ржЪрзНржЫрзЛ, ржпрзЗржоржи `/user/1/edit`, рж╕рзЗржЦрж╛ржирзЗ ржпржжрж┐ `User` ржоржбрзЗрж▓рзЗ ID 1 ржПрж░ ржХрзЛржирзЛ ржЗржЙржЬрж╛рж░ ржирж╛ ржерж╛ржХрзЗ, рждрж╛рж╣рж▓рзЗ ржирж┐ржЪрзЗрж░ error ржЖрж╕ржмрзЗржЗ:

```
No query results for model [App\Models\User] 1
```

---

### ЁЯФН рж╕ржорж╛ржзрж╛ржи ржХрж░рж╛рж░ рзйржЯрж╛ ржзрж╛ржк:

#### тЬЕ рзз. ржбрж╛ржЯрж╛ржмрзЗржЬрзЗ ржЪрзЗржХ ржХрж░рзЛ ID ржЯрж╛ ржЖржЫрзЗ ржХрж┐ржирж╛

Tinker ржжрж┐рзЯрзЗ рж╕рж╣ржЬрзЗ ржЪрзЗржХ ржХрж░рзЛ:

```bash
php artisan tinker
>>> App\Models\User::find(1);
```

* ржпржжрж┐ `null` ржЖрж╕рзЗ, рждрж╛рж╣рж▓рзЗ ID 1 ржПрж░ ржЗржЙржЬрж╛рж░ ржПржХрзНрж╕рж┐рж╕рзНржЯ ржХрж░рзЗ ржирж╛ред

#### тЬЕ рзи. ржмрзНрж░рж╛ржЙржЬрж╛рж░рзЗ ржХрзЛржи ржЗржЙржЬрж╛рж░ ржПржбрж┐ржЯ ржХрж░ржЫрзЛ рж╕рзЗржЯрж╛ ржХржиржлрж╛рж░рзНржо ржХрж░рзЛ

ржпржЦржи ржЗржЙржЬрж╛рж░ рж▓рж┐рж╕рзНржЯ ржерзЗржХрзЗ edit ржмрж╛ржЯржирзЗ ржХрзНрж▓рж┐ржХ ржХрж░рзЛ, рждржЦржи ржпрзЗ URL ржП ржирж┐рзЯрзЗ ржпрж╛рзЯ рж╕рзЗржЯрж╛ ржХржиржлрж╛рж░рзНржо ржХрж░рзЛред ржпржжрж┐ ржнрзБрж▓ ID ржкрж╛ржарж╛ржирзЛ рж╣рзЯ (ржпрзЗржоржи soft-deleted ржмрж╛ non-existent user), рждржЦржирзЛ error ржЖрж╕ржмрзЗред

#### тЬЕ рзй. UI ржерзЗржХрзЗ `Edit` ржмрж╛ржЯржирзЗ `route('user.edit', $user->id)` ржПрж░ ржорждрзЛ ржбрзЗржЯрж╛ ржкрж╛ржарж╛ржирзЛ ржарж┐ржХ ржЖржЫрзЗ ржХрж┐ ржирж╛ ржЪрзЗржХ ржХрж░рзЛ

Blade ржлрж╛ржЗрж▓рзЗ ржПржЯрж╛ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзЛ:

```blade
<a href="{{ route('user.edit', $user->id) }}">Edit</a>
```

---

### ЁЯЫая╕П ржлрж╛ржЗржи ржЯрж┐ржЙржи:

рждрзБржорж┐ ржЪрж╛ржЗрж▓рзЗ ржПржЗ рж▓рж╛ржЗржиржЯрж╛ exception-safe ржХрж░рждрзЗ ржкрж╛рж░рзЛ (not necessary, just for fallback):

```php
public function edit(User $user)
{
    if (!$user) {
        abort(404, 'User not found');
    }
    $role = Role::all();
    $userRole = $user->roles->pluck('id')->toArray();
    return view('role-permission.user.edit', compact('user', 'role', 'userRole'));
}
```

рждржмрзЗ рж░рзБржЯ ржоржбрзЗрж▓ ржмрж╛ржЗржирзНржбрж┐ржВ ржПржоржирж┐рждрзЗржЗ 404 ржжрзЗржмрзЗ ржпржжрж┐ ржЗржЙржЬрж╛рж░ ржирж╛ ржерж╛ржХрзЗред

---

### тЬЕ Bottom Line:

рж╕ржм ржарж┐ржХ ржЖржЫрзЗ, рж╢рзБржзрзБ ржЗржЙржЬрж╛рж░ ID ржпрзЗ ржПржХрзНрж╕рж┐рж╕рзНржЯ ржХрж░рзЗ рж╕рзЗржЯрж╛ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рж▓рзЗржЗ рждрзЛржорж╛рж░ `edit` ржкрзЗржЬ ржарж┐ржХржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░ржмрзЗред

ржЖрж░ ржХрж┐ржЫрзБ рж▓рж╛ржЧрж▓рзЗ ржжрж╛ржУ, ржПржХрж╕рж╛ржерзЗ ржжрзЗржЦрзЗ ржирж┐ржЗред









ржжрж╛рж░рзБржг! рждрж╛рж╣рж▓рзЗ `User::find(1)` ржХрж╛ржЬ ржХрж░ржЫрзЗ тАФ ржЗржЙржЬрж╛рж░ ржПржХрзНрж╕рж┐рж╕рзНржЯ ржХрж░рзЗред

ЁЯУМ ржХрж┐ржирзНрждрзБ рждрзБржорж┐ ржЖржЧрзЗржЗ ржмрж▓рзЗржЫрж┐рж▓рзЗ ржпрзЗ `403 error page` ржжрзЗржЦрж╛ржЪрзНржЫрзЗ ржПржмржВ ржПржЦржи debugbar ржмрж▓ржЫрзЗ `ModelNotFoundException` ржжрж┐ржЪрзНржЫрзЗ тАФ ржПржЗ ржжрзБржЯрзЛ ржПржХрж╕рж╛ржерзЗ рж╣рж▓рзЗ рж╕ржмржЪрзЗрзЯрзЗ рж╕ржорзНржнржмржд ржпрж╛ рж╣ржЪрзНржЫрзЗ:

---

### ЁЯЪи рж╕ржорзНржнрж╛ржмрзНржп ржЖрж╕рж▓ ржХрж╛рж░ржг:

рждрзБржорж┐ ржЗржЙржЬрж╛рж░ рж▓рж┐рж╕рзНржЯ ржерзЗржХрзЗ **edit ржмрж╛ржЯржирзЗ ржХрзНрж▓рж┐ржХ ржХрж░рж╛рж░ ржкрж░ `id` ржарж┐ржХржарж╛ржХ ржкрж╛ржарж╛ржЪрзНржЫрзЛ ржирж╛ред**

> рж╣рзЯржд:
> ЁЯФ╣ ржЗржиржнрзЗржирзНржЯрж░рж┐ ржкрзНрж░ржЬрзЗржХрзНржЯрзЗ `$user->id` ржПрж░ ржмржжрж▓рзЗ `$user->username` ржмрж╛ ржЕржирзНржп ржХрж┐ржЫрзБ ржкрж╛ржарж╛ржирзЛ рж╣ржЪрзНржЫрзЗ
> ЁЯФ╣ ржЖрж░ `User` ржоржбрзЗрж▓ ржпржжрж┐ route binding ржП `getRouteKeyName()` override ржХрж░рзЗ ржерж╛ржХрзЗ, рждрж╛рж╣рж▓рзЗ problem рж╣рждрзЗ ржкрж╛рж░рзЗред

---

### тЬЕ ржПржЦржи ржХрзА ржЪрзЗржХ ржХрж░ржмрзЗ:

#### 1. ЁЯФН Edit ржмрж╛ржЯржирзЗрж░ Blade ржХрзЛржб

```blade
<a href="{{ route('user.edit', $user->id) }}">Edit</a>
```

ЁЯФБ ржПржЯрж╛ ржжрж┐рзЯрзЗ ID ржкрж╛ржарж╛ржЪрзНржЫрзЛ рждрзЛ? ржпржжрж┐ `$user->username`, `$user->slug` ржмрж╛ ржЕржирзНржп ржХрж┐ржЫрзБ ржкрж╛ржарж╛ржУ, рждрж╛рж╣рж▓рзЗ рж╕ржорж╕рзНржпрж╛ рж╣ржмрзЗред

#### 2. ЁЯФН User ржоржбрзЗрж▓рзЗ ржПржЯрж╛ ржХрж┐ ржЖржЫрзЗ?

```php
public function getRouteKeyName()
{
    return 'username'; // тЪая╕П ржпржжрж┐ ржПржоржи ржХрж┐ржЫрзБ override ржХрж░рзЗ ржерж╛ржХрзЛ
}
```

ЁЯСЙ рждрж╛рж╣рж▓рзЗ `/user/{user}/edit` рж░рзБржЯрзЗ `{user}` рж╣ржЪрзНржЫрзЗ `username`, ржирж╛ ржпрзЗ ID рждрж╛ ржирзЯред

тЮбя╕П ржП ржХрзНрж╖рзЗрждрзНрж░рзЗ, `App\Models\User::where('username', '1')->first()` ржжрж┐ржЪрзНржЫрзЗ null тАФ рждрж╛ржЗ `ModelNotFoundException`ред

---

### тЬЕ рж╕ржорж╛ржзрж╛ржи:

#### ЁЯСЙ рж╕ржорж╛ржзрж╛ржи рзз: ржпржжрж┐ `getRouteKeyName()` override ржХрж░рзЗ ржерж╛ржХрзЛ

**рждржмрзЗ ржирж┐ржЪрзЗрж░ ржорждрзЛ ржХрж░рзЗ edit ржмрж╛ржЯржирзЗ `username` ржжрж╛ржУ:**

```blade
<a href="{{ route('user.edit', $user->username) }}">Edit</a>
```

#### ЁЯСЙ рж╕ржорж╛ржзрж╛ржи рзи: ржЕржержмрж╛ override ржмрж╛ржж ржжрж╛ржУ

```php
// User.php ржерзЗржХрзЗ ржПржЯрж╛ ржорзБржЫрзЗ ржжрж╛ржУ ржмрж╛ default рж░рж╛ржЦрзЛ
public function getRouteKeyName()
{
    return 'id'; // ржмрж╛ ржПржЯрж╛ ржПржХржжржоржЗ рж▓рж┐ржЦрзЛ ржирж╛
}
```

---

### ЁЯФЪ рж╕ржВржХрзНрж╖рзЗржкрзЗ:

* ржЗржЙржЬрж╛рж░ ржПржХрзНрж╕рж┐рж╕рзНржЯ ржХрж░рзЗ тЬЕ
* ржХрж┐ржирзНрждрзБ route model binding ржЖржЗржбрж┐ ржирж╛ ржкрзЗрзЯрзЗ `ModelNotFoundException` ржжрж┐ржЪрзНржЫрзЗ тЭМ
* ржХрж╛рж░ржг: рж╕ржорзНржнржмржд wrong key (e.g. username) bind рж╣ржЪрзНржЫрзЗ

ЁЯФз рждрзБржорж┐ ржпржжрж┐ `User.php` ржоржбрзЗрж▓рзЗрж░ ржХрзЛржбржЯрж╛ ржжрж┐рзЯрзЗ ржжрж╛ржУ, ржЖржорж┐ рззрзжрзж% ржХржиржлрж╛рж░рзНржо ржХрж░рзЗ ржжрж┐рждрзЗ ржкрж╛рж░рж┐ред









ржПржХржжржо рж╕рзНржкржЯ ржЕржи! тЬЕ

рждрзЛржорж╛рж░ рж╕ржорж╕рзНржпрж╛рж░ ржорзВрж▓ ржХрж╛рж░ржг ржкрж╛ржУрзЯрж╛ ржЧрзЗржЫрзЗ ржПржЦрж╛ржирзЗржЗ:

---

### ЁЯФН ржХрж╛рж░ржг:

```php
public function getRouteKeyName(): string
{
    return 'username';
}
```

ржПржЯрж╛рж░ ржорж╛ржирзЗ рж╣рж▓рзЛ, ржпржЦржи рждрзБржорж┐ `route('user.edit', $user->id)` ржПржЗржнрж╛ржмрзЗ URL ржмрж╛ржирж╛ржУ, рждржЦржи URL-ржП `id` ржерж╛ржХрж▓рзЗржУ Laravel рж╕рзЗржЯрж╛ `username` ржжрж┐рзЯрзЗ bind ржХрж░рждрзЗ ржЪрж╛ржЪрзНржЫрзЗред ржлрж▓рзЗ `/user/1/edit` тЖТ `User::where('username', '1')->first()` ржЪрж▓рзЗ тАФ ржпрзЗржЯрж╛ ржЕржмрж╢рзНржпржЗ ржлрзЗржЗрж▓ ржХрж░рзЗ, ржХрж╛рж░ржг username рж╣ржЪрзНржЫрзЗ `"ahmad"`ред

---

### тЬЕ рж╕ржорж╛ржзрж╛ржи:

#### тЬФя╕П рж╕ржорж╛ржзрж╛ржи рзз: Edit route-ржП username ржкрж╛ржарж╛ржУ

```blade
<a href="{{ route('user.edit', $users->username) }}" class="btn btn-success">Edit</a>
```

ржПржЯрж╛ржЗ рж╕ржмржЪрзЗрзЯрзЗ ржнрж╛рж▓рзЛ ржПржмржВ `getRouteKeyName()` ржЕржирзБржпрж╛рзЯрзА ржарж┐ржХржарж╛ржХ ржХрж╛ржЬ ржХрж░ржмрзЗред

---

#### ржЕржержмрж╛...

#### ЁЯФБ рж╕ржорж╛ржзрж╛ржи рзи: `getRouteKeyName()` ржорзБржЫрзЗ ржлрзЗрж▓рзЛ

```php
// User.php ржерзЗржХрзЗ ржПржЗ ржлрж╛ржВрж╢ржи ржорзБржЫрзЗ ржлрзЗрж▓рзЛ ржмрж╛ ржПржЗржнрж╛ржмрзЗ рж░рж╛ржЦрзЛ:
public function getRouteKeyName(): string
{
    return 'id';
}
```

рждрж╛рж░ржкрж░ ржЖржЧрзЗрж░ ржорждрзЛржЗ `route('user.edit', $users->id)` ржХрж╛ржЬ ржХрж░ржмрзЗред

---

### ЁЯФз Bonus (рж░рзЗржлрж╛рж░рзЗржирзНрж╕):

рждрзБржорж┐ ржпржжрж┐ future-ржП username ржжрж┐рзЯрзЗ user lookup ржХрж░рждрзЗ ржЪрж╛ржУ (e.g. profile routes), рждржЦржи `getRouteKeyName()` ржЗржЙржЬ ржХрж░рждрзЗ ржкрж╛рж░рзЛред рждржмрзЗ resource controller-ржП ID ржкрж╛ржарж╛рждрзЗ рж╣рж▓рзЗ override ржХрж░рж╛ ржпрж╛ржмрзЗ ржирж╛ред

---

### тЬЕ Final Suggestion:

рждрзБржорж┐ ржпрзЗрж╣рзЗрждрзБ resourceful route ржЗржЙржЬ ржХрж░ржЫрзЛ, рждрж╛ржЗ ржжрзБржЗржЯрж╛рж░ ржоржзрзНржпрзЗ ржпрзЗржЯрж╛ consistent ржоржирзЗ рж╣рзЯ тАФ рж╕рзЗржЯрж╛ ржарж┐ржХ ржХрж░рзЛ:

* ID ржжрж┐рзЯрзЗ ржХрж╛ржЬ ржХрж░рждрзЗ ржЪрж╛ржЗрж▓рзЗ `getRouteKeyName()` ржмрж╛ржж ржжрж╛ржУред
* username ржжрж┐рзЯрзЗ ржХрж╛ржЬ ржХрж░рждрзЗ ржЪрж╛ржЗрж▓рзЗ рж╕ржм рж░рж╛ржЙржЯрзЗржЗ `$user->username` ржкрж╛ржарж╛ржУред

рж╕ржм ржХрзНрж▓рж┐рзЯрж╛рж░? ЁЯШК









ржПржХржжржо ржарж┐ржХ ржзрж░рзЗржЫрзЛ! ЁЯСН ржПржЦржи ржпрзЗрж╣рзЗрждрзБ рждрзБржорж┐ `User` ржоржбрзЗрж▓рзЗ ржПржЗржЯрж╛ рж╕рзЗржЯ ржХрж░рзЗржЫрзЛ:

```php
public function getRouteKeyName(): string
{
    return 'id';
}
```

рждрж╛ржЗ рж╕ржм ржЬрж╛рзЯржЧрж╛рзЯ, ржпрзЗржЦрж╛ржирзЗ `route('users.edit', $user)` ржмрж╛ ржПрж░ржХржо ржХрж┐ржЫрзБ ржЗржЙржЬ ржХрж░ржЫрзЛ, рж╕рзЗржЦрж╛ржирзЗ `id` ржкрж╛ржарж╛ржирзЛ рж╣ржЪрзНржЫрзЗ тАФ ржПржмржВ ржПржЯрж╛ ржПржЦржи рж╕ржарж┐ржХржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░ржмрзЗред

---

### ЁЯФН Livewire Blade (user-table.blade.php) рждрзЗ ржпрзЗржЯрж╛ ржЖржЫрзЗ:

```blade
<x-button.edit class="btn-icon" route="{{ route('users.edit', $user) }}"/>
```

ржПржЦрж╛ржирзЗ `$user` ржжрж┐рж▓рзЗ Laravel ржПржЦржи internally `$user->getKey()` (ржорж╛ржирзЗ `id`) ржЗржЙржЬ ржХрж░ржмрзЗ, ржХрж╛рж░ржг `getRouteKeyName()` ржПржЦржи `id`ред
**So, ржПржЯрж╛ ржПржЦржи ржПржХржжржо ржарж┐ржХржарж╛ржХ ржХрж╛ржЬ ржХрж░ржмрзЗред**

---

### тЬЕ Bottom Line:

* тЬЕ рждрзБржорж┐ `getRouteKeyName()` ржП `id` ржХрж░рзЗ ржжрж┐рзЯрзЗржЫрзЛ тАФ тЬФя╕П
* тЬЕ Blade-ржП `route(..., $user)` ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржЫрзЛ тАФ тЬФя╕П
* тЬЕ ржПржЦржи `/user/{id}/edit` ржарж┐ржХржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░ржмрзЗ тАФ тЬФя╕П

---

ржЖрж░ ржХрж┐ржЫрзБ ржпржжрж┐ ржнрзБрж▓ ржжрзЗржЦрж╛ржУ ржмрж╛ ржХржиржлрж┐ржЙржЬ рж╣ржУ, рждржмрзЗ ржХрзЛржб ржжрж┐рзЯрзЗ ржжрж╛ржУ тАФ ржЖржорж┐ рж╕рж╛ржерзЗ рж╕рж╛ржерзЗржЗ ржжрзЗржЦрзЗ ржлрж┐ржХрзНрж╕ ржХрж░рзЗ ржжрж┐ржЪрзНржЫрж┐ред ЁЯШК
